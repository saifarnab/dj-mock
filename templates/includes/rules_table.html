{% load static %}

<table id="serviceTable" class="table">
    <thead>
    <tr>
        <th>Service Name</th>
        <th>Endpoint Name</th>
        <th>Request Source</th>
        <th>Data Format</th>
        <th>Data Key</th>
        <th>Data Value</th>
        <th>Response Code</th>
        <th>Created At</th>
        <th>Status</th>
        {% if edit or details %}
        <th>Action</th>
        {% endif %}
    </tr>
    </thead>
    <tbody>
    {% for rule in rules %}
    <tr>
        <td>{{ rule.endpoint.service.name }}</td>
        <td>{{ rule.endpoint.endpoint_name }}</td>
        <td>{{ rule.request_source }}</td>
        <td>{{ rule.data_format }}</td>
        <td>{{ rule.condition_field }}</td>
        <td>{{ rule.condition_value }}</td>
        <td>{{ rule.response_code }}</td>
        <td>{{ rule.created_at }}</td>
        <td>
            {% if rule.is_active %}
            <label class="badge badge-gradient-success">ACTIVE</label>
            {% else %}
            <label class="badge badge-gradient-danger">INACTIVE</label>
            {% endif %}
        </td>
        {% if edit or details %}
        <td>
            {% if edit and request.user == rule.endpoint.service.user %}
            <a href="{% url 'edit_rule' rule.id %}" class="btn btn-light btn-sm p-1 rounded-circle"
               title="Edit">
                <i class="fa fa-edit" style="font-size: 0.99rem; color: #333;"></i>
            </a>
            {% endif %}
            {% if details %}
            <a href="{% url 'details_rule' rule.id %}" class="btn btn-light btn-sm p-1 rounded-circle"
               title="Details">
                <i class="fa fa-eye" style="font-size: 0.99rem; color: #333;"></i>
            </a>
            {% endif %}
        </td>
        {% endif %}
    </tr>
    {% endfor %}
    </tbody>
</table>
